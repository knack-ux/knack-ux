import { useState, useRef } from 'react';
import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import Checkbox  from '@knack-ux/checkbox';
import { version } from '@knack-ux/checkbox/package.json';

import Button from '@knack-ux/button';

<Meta title="Components|Checkbox" />

# Checkbox
<span>Latest Version: {version}</span>

```
  import Checkbox from '@knack-ux/checkbox';
```

## Props

<Props of={Checkbox} />

** CheckboxChangeEvent is: **

```ts
export interface CheckboxChangeEvent {
  target: { value: boolean }
  preventDefault: ChangeEvent['preventDefault']
  stopPropagation: ChangeEvent['stopPropagation']
  nativeEvent: MouseEvent | KeyboardEvent
}
```

```
  As well as all div props
```

## Preview

<Preview>
  <Story name="Preview">
    <>
      <Checkbox />
      <Checkbox checked />
      <Checkbox disabled />
      <Checkbox disabled checked />
      <Checkbox error />
    </>
  </Story>
</Preview>

## Basic

<Preview>
  <Story name="Basic">
    {() => {
      const [checked, setChecked] = useState(false);
      return (
        <Checkbox
          label="I agree to check this checkbox!"
          checked={checked}
          onChange={(event) => setChecked(
            event.target.value
          )}
        />
      )
    }}
  </Story>
</Preview>

## Error

<Preview>
  <Story name="Error">
    {() => {
      const [checked, setChecked] = useState(false);
      return (
        <Checkbox
          error
          label="I agree to check this checkbox!"
          checked={checked}
          onChange={(event) => setChecked(
            event.target.value
          )}
        />
      )
    }}
  </Story>
</Preview>

## Disabled

<Preview>
  <Story name="Disabled Checked">
    <Checkbox
      disabled
      label="I agree to check this checkbox!"
      checked
    />
  </Story>
</Preview>

<Preview>
  <Story name="Disabled Not Checked">
    <Checkbox
      disabled
      label="I agree to check this checkbox!"
      checked={false}
    />
  </Story>
</Preview>


## Focus from outside

<Preview>
  <Story name="Focus with ref">
    {() => {
      const checkboxRef = useRef(null);
      const [checked, setChecked] = useState(false);
      return (
        <>
        <Checkbox
          label="I agree to check this checkbox!"
          checked={checked}
          onChange={(event) => setChecked(event.target.value)}
          ref={checkboxRef}
        />
        <br /><br />
        <Button secondary onClick={() => checkboxRef.current.focus()}>
          Focus the checkbox
        </Button>
        </>
      )
    }}
  </Story>
</Preview>